(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b64007f6"],{"411b":function(e,t,a){},"47fe":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"100px",rules:e.rules}},[a("el-form-item",{attrs:{label:"名称",prop:"title",required:""}},[a("el-input",{model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),a("el-form-item",{attrs:{label:"类型",prop:"space_type",required:""}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.space_type,callback:function(t){e.$set(e.form,"space_type",t)},expression:"form.space_type"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{staticClass:"w300",attrs:{label:"城市",prop:"city",required:""}},[a("el-input",{model:{value:e.form.city,callback:function(t){e.$set(e.form,"city",t)},expression:"form.city"}})],1),a("el-form-item",{staticClass:"w300",attrs:{label:"区域",prop:"zone",required:""}},[a("el-input",{model:{value:e.form.zone,callback:function(t){e.$set(e.form,"zone",t)},expression:"form.zone"}})],1),a("el-form-item",{staticClass:"w300",attrs:{label:"价格(可不填)"}},[a("el-input",{model:{value:e.form.sale_price,callback:function(t){e.$set(e.form,"sale_price",t)},expression:"form.sale_price"}})],1),a("el-form-item",{attrs:{label:"标签",prop:"tags",required:""}},[a("draggable",{on:{end:e.onDragEnd},model:{value:e.form.tags,callback:function(t){e.$set(e.form,"tags",t)},expression:"form.tags"}},e._l(e.form.tags,(function(t){return a("el-tag",{key:t,attrs:{closable:"","disable-transitions":!1},on:{close:function(a){return e.handleClose(t)}}},[e._v(" "+e._s(t)+" ")])})),1),e.inputVisible?a("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:e.handleInputConfirm},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleInputConfirm(t)}},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}):a("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:e.showInput}},[e._v("+ 添加")])],1),a("el-form-item",{attrs:{prop:"banner_images",label:"banner图",required:""}},[a("el-upload",{attrs:{action:"https://www.cdcwlv.work/mp/upload_images",multiple:!0,"list-type":"picture-card",name:"file","file-list":e.banner_images,"on-success":e.handleAvatarSuccess,"on-remove":e.handleAvatarRemove,"on-error":e.handleAvatarError}},[a("i",{staticClass:"el-icon-plus"})])],1),a("el-form-item",{attrs:{prop:"detail_images",label:"详情介绍图",required:""}},[a("el-upload",{attrs:{action:"https://www.cdcwlv.work/mp/upload_images",multiple:!0,"list-type":"picture-card",name:"file","file-list":e.detail_images,"on-success":e.handleDetailSuccess,"on-remove":e.handleDetailRemove,"on-error":e.handleAvatarError}},[a("i",{staticClass:"el-icon-plus"})])],1),a("el-form-item",{attrs:{label:"地址",prop:"address",required:""}},[a("el-input",{model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1),a("el-form-item",{attrs:{label:"简介",prop:"description",required:""}},[a("el-input",{attrs:{type:"textarea",rows:5,autosize:{minRows:5}},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit("form")}}},[e._v("提交")])],1)],1)],1)},i=[],s=(a("d81d"),a("a434"),a("b0c0"),a("9add")),l=a("b76a"),n=a.n(l),o={components:{draggable:n.a},data:function(){return{form:{id:"",name:"",letter:"",image:"",space_type:"",fileList:[],banner_images:[],city:"",zone:"",sale_price:"",address:"",tags:[],title:"",description:"",detail_images:[]},rules:{title:[{required:!0,message:"请输入名称",trigger:"blur"}],city:[{required:!0,message:"请输入城市",trigger:"blur"}],zone:[{required:!0,message:"请输入区域",trigger:"blur"}],space_type:[{required:!0,message:"请选择类型",trigger:"blur"}],address:[{required:!0,message:"请选择类型",trigger:"blur"}],description:[{required:!0,message:"请选择类型",trigger:"blur"}],tags:[{type:"array",required:!0,message:"请输入标签",trigger:"blur"}],banner_images:[{type:"array",required:!0,message:"请上传banner图",trigger:"blur"}],detail_images:[{type:"array",required:!0,message:"请上传详情图",trigger:"blur"}]},inputVisible:!1,inputValue:"",banner_images:[],detail_images:[],dialogImageUrl:"",dialogVisible:!1,options:[{value:"hotel",label:"酒店"},{value:"jingdian",label:"景点"},{value:"mall",label:"商场"},{value:"car",label:"宠物包车"},{value:"picture",label:"宠物摄影"},{value:"park",label:"宠物公园"}],props:{lazy:!0,lazyLoad:this.lazyLoad}}},created:function(){var e=this;if(this.$route.params.id){var t=this.$route.params.id;Object(s["c"])(t).then((function(t){e.form=t.data,e.form.title=t.data.real_title,e.banner_images=t.data.banner_images.map((function(e){return{name:e,url:e}})),e.detail_images=t.data.detail_images.map((function(e){return{name:e,url:e}}))}))}},methods:{onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;console.log(t.form),t.form.id?Object(s["b"])(t.form).then((function(e){t.$message({message:"添加成功",type:"success"})})):Object(s["a"])(t.form).then((function(e){t.$message({message:"添加成功",type:"success"})})),t.$router.push({path:"/brand/list"})}))},handleAvatarRemove:function(e){var t=this.form.banner_images.indexOf(e.url);t>=0&&this.form.banner_images.splice(t,1)},handleAvatarSuccess:function(e){this.form.banner_images.push(e.data.image_url),this.dialogImageUrl=e.data.image_url},handleAvatarError:function(e){var t=JSON.parse(e.message);this.$message({message:t["meta"]["error_message"],type:"fail"})},handleDetailRemove:function(e){var t=this.form.detail_images.indexOf(e.url);t>=0&&this.form.detail_images.splice(t,1)},handleDetailSuccess:function(e){this.form.detail_images.push(e.data.image_url),this.dialogImageUrl=e.data.image_url},beforeAvatarUpload:function(){},handleClose:function(e){this.form.tags.splice(this.form.tags.indexOf(e),1)},showInput:function(){var e=this;this.inputVisible=!0,this.$nextTick((function(t){e.$refs.saveTagInput.$refs.input.focus()}))},handleInputConfirm:function(){var e=this.inputValue;e&&this.form.tags.push(e),this.inputVisible=!1,this.inputValue=""},onDragEnd:function(){console.log(this.form.tags,"form.childProject")},lazyLoad:function(e){getCategories().then((function(t){var a=t.data.items.map((function(e){return{value:e.id,label:e.name,leaf:!1}}));e(a)}))}}},u=o,m=(a("865d"),a("2877")),c=Object(m["a"])(u,r,i,!1,null,null,null);t["default"]=c.exports},"865d":function(e,t,a){"use strict";a("411b")},"9add":function(e,t,a){"use strict";a.d(t,"d",(function(){return i})),a.d(t,"c",(function(){return s})),a.d(t,"a",(function(){return l})),a.d(t,"b",(function(){return n}));var r=a("b775");function i(e){return Object(r["a"])({url:"mp/v1/pet_hotels",method:"get",params:e})}function s(e){return Object(r["a"])({url:"mp/v1/pet_hotels/"+e,method:"get"})}function l(e){return Object(r["a"])({url:"mp/v1/pet_hotels",method:"post",data:e})}function n(e){return Object(r["a"])({url:"mp/v1/pet_hotels/"+e.id,method:"put",data:e})}}}]);